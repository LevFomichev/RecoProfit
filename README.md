<image src = 'data/main_project_image.png'>

# RecoProfit
## Разработка *API* сервиса для рекомендации товаров пользователям на основе *ML*-модели.

### Описание проекта

В рамках данной задачи нам будет необходимо разработать *API*, которое анализирует поведение клиентов и историю их покупок, чтобы в реальном времени предлагать 3 релевантных товара на главной странице сайта.

Разработанное *API* должно повысить средний чек, конверсию и лояльность покупателей за счет индивидуального подхода.

---

### Бизнес-задача:

Повысить прибыль от допродаж в интернет-магазине компании-ритейлера.

Целевой прирост конверсии должен составлять не менее 20%.

### Техническая задача для специалиста в Data Science:

Провести анализ предоставленных данных, отобрать признаки и обучить оптимальную *ML*-модель, на основе которой будет разрабатываться дальнейшее *API*.

---

### Организационная информация

[Ход исследования и разработки](RecoProfit.ipynb) был поделён на главы, характеризующие их содержание:

1. Чтение и исследование данных:

    * Древо категорий товаров

    * Лог событий

    * Свойства товаров

    * Выводы по этапу

2. Создание факторов для модели:

    * Генерация user-факторов

    * Генерация факторов, связанных с items

3. Датасет для обучения

4. XGBoost-модель:

    * Обучение и анализ модели

    * Рекомендательная система

    * Анализ системы рекомендаций

---

Запуск сервиса реализован с помощью импорта образа из Docker Hub:

```powershell

# Скачивание образа API
docker pull thrxlxs/recommendation-api:latest

# Запуск контейнера 
docker run -d -p 5000:5000 thrxlxs/recommendation-api:latest

```

С примерами запросов к сервису можно ознакомится к прилагающейся [документации](Recommendation-API-1.0.0.yaml).

```py

ID для проверки: [1150086, 530559, 684514]

ID новых пользователей: [1234567, 222333, 456234]

```

---

### Инструменты

Минимально необходимые библиотеки для воспроизводимости результатов расположены в файле [requirements.txt](model_service/requirements.txt).

Загрузить их можно воспользовавшись командой:

```py

pip install -r model_service/requirements.txt

```

---

### Наборы данных

[Данные](https://drive.google.com/drive/folders/1mmPUcDRIe4PUII0t-8QSvB5ATY1PkeoD?usp=drive_link) предоставленные для решения задачи поделены на тематические датасеты. В рамках решения задачи они были объедены в единый набор данных.

Для лучшего понимания предоставленных нам данных приведём краткое описание каждого из имеющихся в них столбцов.

#### **ДРЕВО КАТЕГОРИЙ ТОВАРОВ**

Таблица хранит в себе данные о дочерних и материнских категориях товаров:

| Наименование столбца | Описание | Тип данных | Пример значения |
|---|---|---|---|
| categoryid |Категория товара | int64 | 1016 |
| parentid | Родительская категория товара | float64 | 213.0 |

#### **ЛОГ СОБЫТИЙ**

Датасет с событиями взаимодействий пользователей с товарами:

| Наименование столбца | Описание | Тип данных | Пример значения |
| --- | --- | --- | --- |
| timestamp | Временная метка события | datetime64[ns] | 2015-06-02 05:02:12.117 |
| visitorid | Идентификатор пользователя | int64 | 257597 |
| event | Тип события | object | view |
| itemid | Идентификатор товара | int64 | 355908 |
| transactionid | Идентификатор транзакции, если она проходила | float64 | 435675.0 |

#### **СВОЙСТВА ТОВАРОВ**

Наборы данных с свойствами товаров:

| Наименование столбца | Описание | Тип данных | Пример значения |
| --- | --- | --- | --- |
| timestamp | Временная метка записи значения свойства | datetime64[ns] | 2015-06-28 03:00:00 |
| item_id | Идентификатор товара | int64 | 460429 |
| property | Свойство товара. Все, кроме категории, захешированы | object | categoryid |
| value | Значение свойства | object | 1338 |